<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Clipboard API Example</title>
</head>

<body>
  <button onclick="copyText()">Copy Text</button>
  <button id="copyClipboard" onclick="copyClipboard()">Copy clipboard</button>

  <script>
    function somePromiseFunction() {
     
      return new Promise((resolve, reject) => {
        // Your asynchronous operations here
        // For example, resolving after a timeout
        setTimeout(() => {
          console.log("timeout")
          const textToCopy = "Hello, world!";
          resolve(textToCopy);
        }, 3000);
      });
    }

    function copyClipboard(){
        console.log("copyClipboard");
        navigator.clipboard.writeText("test");
    }

    function copyText() {
      const startTime = Date.now();
      navigator.clipboard.writeText("qwerty");
      somePromiseFunction()
        .then((textToCopy) => {
          console.log("then")
          document.getElementById('copyClipboard').click();
          const endTime = Date.now();
          const executionTime = endTime - startTime;
          console.log(`Execution time: ${executionTime} milliseconds`);
          // navigator.clipboard.writeText(textToCopy)
            .then(() => {
              console.log("Text copied to clipboard:", textToCopy);
            })
            .catch(error => {
              console.error("Failed to copy text to clipboard:", error);
            });
        })
        .catch(error => {
          // Handle any errors from somePromiseFunction or clipboard write operation
          console.error("An error occurred:", error);
        });
    }
  </script>
</body>

</html>